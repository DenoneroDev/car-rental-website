(()=>{"use strict";const e=$("#cars"),t=$("#search"),a=$("#menue-button"),l=$("#menue"),s=$(".number"),n=$("#search-icon"),o=$(".logo"),r=$("#search"),i=$("#header"),d=$("#search-input"),u=$("#loading"),c=$("#error"),m=$("#msg");let p=!1,h=!1,v=!0,g=!0,w=!0;const f=new URL(window.location);let y,b=[],L="";function I(){g&&(g=!1,h?(d.focusout(),i.css({"justify-content":"space-around"}),r.css({border:"none"}),n.css({position:"absolute",top:`${n.position().top}px`,left:`${n.position().left}px`}),n.animate({left:"65.4219px"},250,(()=>{n.css({position:"unset"})})),d.animate({width:"0"},250,(()=>{d.hide(),w?$(s).showFlex():a.show(),$(o[0]).show(),h=!1,g=!0}))):(w=$(s[0]).is(":visible"),i.css({"justify-content":"center"}),r.css({border:"1px solid var(--black)"}),d.width(0),d.show(),$(o[0]).hide(),$(s[0]).hide(),a.hide(),d.animate({width:"100%"},250,(()=>{h=!0,g=!0,d.focus()}))))}function V(){if(v)if(v=!1,a.toggleClass("open"),p)l.animate({height:0,padding:0},250,(()=>{l.hide(),p=!1,v=!0}));else{l.showGrid(),l.css("height","auto"),l.css("padding","20px");const e=l.outerHeight();l.height(0),l.animate({height:e},250,(()=>{p=!0,v=!0}))}}function N(e){return e.charAt(0).toUpperCase()+e.slice(1)}$(document).ready((function(){i.height(i.height());for(var e=1;e<=26;e++){var s=175-25*Math.ceil(e/2),o=-.1*e+"s";e%2==0&&(o=-(.1*e+1)+"s");var d=$('<div class="dot"></div>').css("animation-delay",o).css("left",s+"px"),u=$("<div></div>").css("animation-delay",o);d.append(u),$(".loader").append(d)}a.click((()=>V())),t.submit((e=>{e.preventDefault(),f.pathname="/browse",f.searchParams.set("page",1);const t=$("#search-input").val();""!=t?f.searchParams.set("search",t):f.searchParams.delete("search"),location.href=f.href})),$(document).bind("mouseup touchend",(e=>{!p||l.is(e.target)||0!==l.has(e.target).length||0!=a.has(e.target).length||a.is(e.target)||V(),h&&!r.is(e.target)&&0===r.has(e.target).length&&I()})).on("scroll",(()=>{p&&V(),h&&I()})),document.body.clientWidth<=1e3&&n.click((()=>I()))})),Array.prototype.remove=function(e){const t=this.indexOf(e);-1!==t&&this.splice(t,1)},$.fn.showFlex=function(){this.css({display:"flex"})},$.fn.showGrid=function(){this.css({display:"grid"})};const S=$("#packets");let P;const E={name:"packets",section:null,dropdown:null,element:null,values:null,valueNames:null,items:null,itemNames:null,query:null,ids:[],init:async()=>{P=await $.ajax({url:"/api/packets",type:"GET",data:{},error:()=>{console.log("Internal Server Error")}});for(const e of P){const t=`<option class="filter-selector" value="${e.title}">${e.title}</option>`;S.append(t)}E.section=document.getElementById(`${E.name}`),E.dropdown=new Choices(E.section,{removeItemButton:!0,maxItemCount:5,duplicateItemsAllowed:!1,allowHTML:!0}),E.element=E.dropdown.passedElement.element.parentElement;const e=f.searchParams.get(E.name);E.query=e?e.split(","):[],E.loadListeners(),E.setValue(E.query.map((e=>{const t=P.find((t=>t._id===e));return t?t.title:null})))},hasValue:()=>E.values.length>0,setPlaceHolder:e=>{E.dropdown.input.placeholder=e,E.dropdown.input.setWidth(3)},clearPlaceHolder:()=>{E.setPlaceHolder("")},addListener:(e,t)=>{E.section.addEventListener(e,t)},update:()=>{E.values=E.dropdown.getValue(),E.valueNames=E.values.map((e=>e.value)),E.ids=E.valueNames.map((e=>{const t=P.find((t=>t.title===e));return t?t._id:null})),E.items=E.dropdown._currentState.choices.filter(((e,t,a)=>!E.valueNames.includes(e.value)&&t===a.findIndex((t=>t.value===e.value)))),E.itemNames=E.items.map((e=>e.value)),E.clearPlaceHolder(),E.hasValue()||E.setPlaceHolder("All")},onSubmit:()=>{E.hasValue()?f.searchParams.set(E.name,E.ids):f.searchParams.delete(E.name)},loadListeners:()=>{E.addListener("change",(e=>{E.update()}))},setValue:e=>{e.forEach((e=>{E.dropdown._findAndSelectChoiceByValue(e)}))},reset:()=>{E.dropdown.removeActiveItems()}},A={name:"models",section:null,dropdown:null,element:null,values:null,valueNames:null,items:[],itemNames:[],query:null,init:()=>{A.section=document.getElementById(`${A.name}`),A.dropdown=new Choices(A.section,{removeItemButton:!0,duplicateItemsAllowed:!1,allowHTML:!0}),A.element=A.dropdown.passedElement.element.parentElement;const e=f.searchParams.get(A.name);A.query=e?e.split(","):[],A.loadListeners()},hasValue:()=>A.values.length>0,isEmpty:()=>A.values.length<=0&&A.items.length<=0,setPlaceHolder:e=>{A.dropdown.input.placeholder=e,A.dropdown.input.setWidth(3)},clearPlaceHolder:()=>{A.setPlaceHolder("")},addListener:(e,t)=>{A.section.addEventListener(e,t)},update:()=>{A.values=A.dropdown.getValue(),A.valueNames=A.values.map((e=>e.value)),A.items=A.dropdown._currentState.choices.filter(((e,t,a)=>!A.valueNames.includes(e.value)&&t===a.findIndex((t=>t.value===e.value)))),A.itemNames=A.items.map((e=>e.value)),A.clearPlaceHolder(),A.hasValue()||A.setPlaceHolder("All"),A.isEmpty()&&A.disable()},loadListeners:()=>{A.addListener("change",(e=>{A.update()}))},onSubmit:()=>{A.hasValue()?f.searchParams.set(A.name,A.valueNames):f.searchParams.delete(A.name)},addItems:e=>{e.forEach((e=>{const t={value:e,label:e};A.itemNames.push(e),A.items.push(t)})),A.dropdown.setChoices(A.items,"value","label",!0),A.dropdown.enable()},setValue:e=>{e.forEach((e=>{A.dropdown._findAndSelectChoiceByValue(e)}))},remove:e=>{e.forEach((e=>{const t=A.dropdown._currentState.choices.findIndex((t=>t.value===e));-1!==t&&A.dropdown._currentState.choices.splice(t,1);const a=document.querySelector(`.choices__item[data-value="${e}"]`);a&&(A.dropdown._currentState.items=A.dropdown._currentState.items.filter((t=>t.value!==e)),a.remove())})),A.isEmpty()&&A.disable()},disable:()=>{A.dropdown.clearChoices(),A.dropdown.hideDropdown(),A.dropdown.disable(),A.setPlaceHolder("All")}},C=$("#marks"),x={},k={name:"marks",section:null,dropdown:null,element:null,values:null,valueNames:null,items:null,itemNames:null,query:null,init:async()=>{const e=await $.ajax({url:"/api/marks",type:"GET",error:()=>{console.log("Internal Server Error")}});for(const t of e){x[t.name]=t.models;const e=`<option class="filter-selector" value="${t.name}">${t.name}</option>`;C.append(e)}k.section=document.getElementById(`${k.name}`),k.dropdown=new Choices(k.section,{removeItemButton:!0,duplicateItemsAllowed:!1,allowHTML:!0}),k.element=k.dropdown.passedElement.element.parentElement;const t=f.searchParams.get(k.name);k.query=t?t.split(","):[],k.loadListeners(),A.init(),k.setValue(k.query),A.setValue(A.query)},hasValue:()=>k.values.length>0,setPlaceHolder:e=>{k.dropdown.input.placeholder=e,k.dropdown.input.setWidth(3)},clearPlaceHolder:()=>k.setPlaceHolder(""),addListener:(e,t)=>k.section.addEventListener(e,t),update:()=>{k.values=k.dropdown.getValue(),k.valueNames=k.values.map((e=>e.value)),k.items=k.dropdown._currentState.choices.filter(((e,t,a)=>!k.valueNames.includes(e.value)&&t===a.findIndex((t=>t.value===e.value)))),k.itemNames=k.items.map((e=>e.value)),k.clearPlaceHolder(),k.hasValue()||k.setPlaceHolder("All")},loadListeners:()=>{k.addListener("removeItem",(e=>{A.dropdown.hideDropdown(),A.remove(x[e.detail.value]),A.update(),k.update()})),k.addListener("addItem",(e=>{A.addItems(x[e.detail.value]),A.update(),k.update()}))},onSubmit:()=>{k.hasValue()?f.searchParams.set(k.name,k.valueNames):f.searchParams.delete(k.name)},setValue:e=>{e.forEach((e=>{k.dropdown._findAndSelectChoiceByValue(e)}))},reset:()=>{k.dropdown.removeActiveItems()}},B={name:"colors",section:null,dropdown:null,element:null,values:null,valueNames:null,items:null,itemNames:null,query:null,colorMap:new Map,blackSvgUrl:"data:image/svg+xml;base64,",whiteSvgUrl:"data:image/svg+xml;base64,",init:()=>{B.section=document.getElementById(`${B.name}`),B.dropdown=new Choices(B.section,{removeItemButton:!0,duplicateItemsAllowed:!1,shouldSort:!1,allowHTML:!0}),B.element=B.dropdown.passedElement.element.parentElement;const e=f.searchParams.get(B.name);B.query=e?e.split(","):[];const t=["#ffffff","#000000","#f3dfba","#c3111f","#0083c3","#bababa","#c0c0c0","#ffea00","#009100","#5e4532","#ba8551","#e4c960","#e89319","#6c005e"];B.blackSvgUrl+=btoa('<svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21"><path d="M2.592.044l18.364 18.364-2.548 2.548L.044 2.592z"/><path d="M0 18.364L18.364 0l2.548 2.548L2.548 20.912z"/></svg>'),B.whiteSvgUrl+=btoa('<svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21"><path d="M2.592.044l18.364 18.364-2.548 2.548L.044 2.592z" fill="#FFF"/><path d="M0 18.364L18.364 0l2.548 2.548L2.548 20.912z" fill="#FFF"/></svg>'),$($(".choices__list").get(10)).find(".choices__item").each(((e,a)=>{const l=t[e];$(a).css("color",B.getContrast(l)),$(a).css("background-color",l),B.colorMap.set(B.hashString($(a).attr("data-value")),l)})),B.loadListeners(),B.setValue(B.query)},hasValue:()=>B.values.length>0,hasItem:()=>B.items.length>0,setPlaceHolder:e=>{B.dropdown.input.placeholder=e,B.dropdown.input.setWidth(3)},clearPlaceHolder:()=>{B.setPlaceHolder("")},addListener:(e,t)=>{B.section.addEventListener(e,t)},update:()=>{B.values=B.dropdown.getValue(),B.valueNames=B.values.map((e=>e.value)),B.items=B.dropdown._currentState.choices.filter(((e,t,a)=>!B.valueNames.includes(e.value)&&t===a.findIndex((t=>t.value===e.value)))),B.itemNames=B.items.map((e=>e.value)),setTimeout((()=>{B.hasItem()&&$($(".choices__list").get(10)).find(".choices__item").each(((e,t)=>{const a=B.colorMap.get(B.hashString($(t).attr("data-value")));$(t).css("background-color",a),$(t).css("color",B.getContrast(a))})),B.hasValue()&&$($(".choices__list").get(9)).find(".choices__item").each(((e,t)=>{const a=B.colorMap.get(B.hashString($(t).attr("data-value")));$(t).css("background-color",a),$(t).css("color",B.getContrast(a)),$($(t).find("button")).css("background-image",`url(${B.getContrast(a,"image")})`),$($(t).find("button")).css("border-left",`1px solid ${B.getContrast(a)}`)}))}),0),B.clearPlaceHolder(),B.hasValue()||B.setPlaceHolder("All")},onSubmit:()=>{B.hasValue()?f.searchParams.set(B.name,B.valueNames):f.searchParams.delete(B.name)},loadListeners:()=>{B.addListener("change",(e=>{B.update()})),B.addListener("highlightItem",(e=>{B.update()}))},setValue:e=>{e.forEach((e=>{B.dropdown._findAndSelectChoiceByValue(e)}))},reset:()=>{B.dropdown.removeActiveItems()},toggle:()=>{B.section.style.display="block"},hashString:e=>{let t=2166136261;if(e){for(let a=0;a<e.length;a++)t^=e.charCodeAt(a),t*=16777619;return t>>>0}console.log("hashString: Invalid string")},getContrast:(e,t="hex")=>{if(e=e?.replace("#",""),!t||"hex"!==t&&"image"!==t)return void console.log("getContrast[type]: Invalid type");if(!e||!/^([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e))return void console.log("getContrast[hexColor]: Invalid hexColor");const[a,l,s]=e.match(/.{2}/g).map((e=>parseInt(e,16))),n=(.299*a+.587*l+.114*s)/255;return"hex"===t?n>=.5?"#000000":"#ffffff":n>=.5?B.blackSvgUrl:B.whiteSvgUrl}},_={name:"distance",section:null,dropdown:null,element:null,values:null,valueName:null,items:null,itemNames:null,query:null,init:()=>{_.section=document.getElementById(`${_.name}`),_.dropdown=new Choices(_.section,{removeItemButton:!0,duplicateItemsAllowed:!1,editItems:!0,searchEnabled:!1,searchChoices:!1,shouldSort:!1,allowHTML:!0}),_.element=_.dropdown.passedElement.element.parentElement;const e=f.searchParams.get(_.name);_.query=e?e.split(","):[],_.loadListeners(),_.setValue(_.query)},hasValue:()=>null!=_.values,addListener:(e,t)=>{_.section.addEventListener(e,t)},update:()=>{_.values=_.dropdown.getValue(),_.valueName=_.values?_.values.value:"",_.items=_.dropdown._currentState.choices.filter(((e,t,a)=>_.valueName!=e.value&&t===a.findIndex((t=>t.value===e.value)))),_.itemNames=_.items.map((e=>e.value))},onSubmit:()=>{_.hasValue()&&"All"!=_.valueName?f.searchParams.set(_.name,_.valueName):f.searchParams.delete(_.name)},loadListeners:()=>{_.addListener("change",(e=>{_.update()})),_.addListener("highlightItem",(e=>{_.update()}))},setValue:e=>{_.dropdown._findAndSelectChoiceByValue(e[0])},reset:()=>{_.setValue(["All"])},toggle:()=>{_.section.style.display="block"}},H={name:"fuel",section:null,dropdown:null,element:null,values:null,valueName:null,items:null,itemNames:null,query:null,init:()=>{H.section=document.getElementById(`${H.name}`),H.dropdown=new Choices(H.section,{removeItemButton:!0,duplicateItemsAllowed:!1,searchEnabled:!1,searchChoices:!1,allowHTML:!0}),H.element=H.dropdown.passedElement.element.parentElement;const e=f.searchParams.get(H.name);H.query=e?e.split(","):[],H.loadListeners(),H.setValue(H.query)},hasValue:()=>null!=H.values,addListener:(e,t)=>{H.section.addEventListener(e,t)},update:()=>{H.values=H.dropdown.getValue(),H.valueName=H.values?H.values.value:"",H.items=H.dropdown._currentState.choices.filter(((e,t,a)=>H.valueName!=e.value&&t===a.findIndex((t=>t.value===e.value)))),H.itemNames=H.items.map((e=>e.value))},onSubmit:()=>{H.hasValue()&&"All"!=H.valueName?f.searchParams.set(H.name,H.valueName):f.searchParams.delete(H.name)},loadListeners:()=>{H.addListener("change",(e=>{H.update()})),H.addListener("highlightItem",(e=>{H.update()}))},setValue:e=>{H.dropdown._findAndSelectChoiceByValue(e[0])},reset:()=>{H.setValue(["All"])},toggle:()=>{H.section.style.display="block"}},M={name:"transmission",section:null,dropdown:null,element:null,values:null,valueName:null,items:null,itemNames:null,query:null,init:()=>{M.section=document.getElementById(`${M.name}`),M.dropdown=new Choices(M.section,{removeItemButton:!0,duplicateItemsAllowed:!1,searchEnabled:!1,searchChoices:!1,allowHTML:!0}),M.element=M.dropdown.passedElement.element.parentElement;const e=f.searchParams.get(M.name);M.query=e?e.split(","):[],M.loadListeners(),M.setValue(M.query)},hasValue:()=>M.values,addListener:(e,t)=>{M.section.addEventListener(e,t)},update:()=>{M.values=M.dropdown.getValue(),M.valueName=M.values?M.values.value:"",M.items=M.dropdown._currentState.choices.filter(((e,t,a)=>M.valueName!=e.value&&t===a.findIndex((t=>t.value===e.value)))),M.itemNames=M.items.map((e=>e.value))},onSubmit:()=>{M.hasValue()&&"All"!=M.valueName?f.searchParams.set(M.name,M.valueName):f.searchParams.delete(M.name)},loadListeners:()=>{M.addListener("change",(e=>{M.update()})),M.addListener("highlightItem",(e=>{M.update()}))},setValue:e=>{M.dropdown._findAndSelectChoiceByValue(e[0])},reset:()=>{M.setValue(["All"])},toggle:()=>{M.section.style.display="block"}},q={name:"rating",section:null,dropdown:null,element:null,values:null,valueName:null,items:null,itemNames:null,query:null,init:()=>{q.section=document.getElementById(`${q.name}`),q.dropdown=new Choices(q.section,{removeItemButton:!0,duplicateItemsAllowed:!1,editItems:!0,searchEnabled:!1,searchChoices:!1,allowHTML:!0}),q.element=q.dropdown.passedElement.element.parentElement;const e=f.searchParams.get(q.name);q.query=e?e.split(","):[],q.loadListeners(),q.setValue(q.query)},hasValue:()=>null!=q.values,addListener:(e,t)=>{q.section.addEventListener(e,t)},update:()=>{q.values=q.dropdown.getValue(),q.valueName=q.values?q.values.value:"",q.items=q.dropdown._currentState.choices.filter(((e,t,a)=>q.valueName!=e.value&&t===a.findIndex((t=>t.value===e.value)))),q.itemNames=q.items.map((e=>e.value))},onSubmit:()=>{q.hasValue()&&"All"!=q.valueName?f.searchParams.set(q.name,q.valueName.replace(" Stars","").replace(" Star","")):f.searchParams.delete(q.name)},loadListeners:()=>{q.addListener("change",(e=>{q.update()})),q.addListener("highlightItem",(e=>{q.update()}))},setValue:e=>{q.dropdown._findAndSelectChoiceByValue("All"===e[0]?e[0]:1==e[0]?e[0]+" Star":e[0]+" Stars")},reset:()=>{q.setValue(["All"])},toggle:()=>{q.section.style.display="block"}},T={name:"power",section:null,dropdown:null,element:null,values:null,valueName:null,items:null,itemNames:null,query:null,init:()=>{T.section=document.getElementById(`${T.name}`),T.dropdown=new Choices(T.section,{removeItemButton:!0,duplicateItemsAllowed:!1,editItems:!0,searchEnabled:!1,searchChoices:!1,shouldSort:!1,allowHTML:!0}),T.element=T.dropdown.passedElement.element.parentElement;const e=f.searchParams.get(T.name);T.query=e?e.split(","):[],T.loadListeners(),T.setValue(T.query)},hasValue:()=>null!=T.values,addListener:(e,t)=>{T.section.addEventListener(e,t)},update:()=>{T.values=T.dropdown.getValue(),T.valueName=T.values?T.values.value:"",T.items=T.dropdown._currentState.choices.filter(((e,t,a)=>T.valueName!=e.value&&t===a.findIndex((t=>t.value===e.value)))),T.itemNames=T.items.map((e=>e.value))},onSubmit:()=>{T.hasValue()&&"All"!=T.valueName?f.searchParams.set(T.name,T.valueName):f.searchParams.delete(T.name)},loadListeners:()=>{T.addListener("change",(e=>{T.update()})),T.addListener("highlightItem",(e=>{T.update()}))},setValue:e=>{T.dropdown._findAndSelectChoiceByValue(e[0])},reset:()=>{T.setValue(["All"])},toggle:()=>{T.section.style.display="block"}},F={name:"doors",section:null,dropdown:null,element:null,values:null,valueName:null,items:null,itemNames:null,query:null,init:()=>{F.section=document.getElementById(`${F.name}`),F.dropdown=new Choices(F.section,{removeItemButton:!0,duplicateItemsAllowed:!1,editItems:!0,searchEnabled:!1,searchChoices:!1,shouldSort:!1,allowHTML:!0}),F.element=F.dropdown.passedElement.element.parentElement;const e=f.searchParams.get(F.name);F.query=e?e.split(","):[],F.loadListeners(),F.setValue(F.query)},hasValue:()=>null!=F.values,addListener:(e,t)=>{F.section.addEventListener(e,t)},update:()=>{F.values=F.dropdown.getValue(),F.valueName=F.values?F.values.value:"",F.items=F.dropdown._currentState.choices.filter(((e,t,a)=>F.valueName!=e.value&&t===a.findIndex((t=>t.value===e.value)))),F.itemNames=F.items.map((e=>e.value))},onSubmit:()=>{F.hasValue()&&"All"!=F.valueName?f.searchParams.set(F.name,F.valueName.replace(" Doors","")):f.searchParams.delete(F.name)},loadListeners:()=>{F.addListener("change",(e=>{F.update()})),F.addListener("highlightItem",(e=>{F.update()}))},setValue:e=>{F.dropdown._findAndSelectChoiceByValue("All"===e[0]?e[0]:e[0]+" Doors")},reset:()=>{F.setValue(["All"])},toggle:()=>{F.section.style.display="block"}},D={name:"seats",section:null,dropdown:null,element:null,values:null,valueName:null,items:null,itemNames:null,query:null,init:()=>{D.section=document.getElementById(`${D.name}`),D.dropdown=new Choices(D.section,{removeItemButton:!0,duplicateItemsAllowed:!1,editItems:!0,searchEnabled:!1,searchChoices:!1,shouldSort:!1,allowHTML:!0}),D.element=D.dropdown.passedElement.element.parentElement;const e=f.searchParams.get(D.name);D.query=e?e.split(","):[],D.loadListeners(),D.setValue(D.query)},hasValue:()=>null!=D.values,addListener:(e,t)=>{D.section.addEventListener(e,t)},update:()=>{D.values=D.dropdown.getValue(),D.valueName=D.values?D.values.value:"",D.items=D.dropdown._currentState.choices.filter(((e,t,a)=>D.valueName!=e.value&&t===a.findIndex((t=>t.value===e.value)))),D.itemNames=D.items.map((e=>e.value))},onSubmit:()=>{D.hasValue()&&"All"!=D.valueName?f.searchParams.set(D.name,D.valueName.replace(" Seats","")):f.searchParams.delete(D.name)},loadListeners:()=>{D.addListener("change",(e=>{D.update()})),D.addListener("highlightItem",(e=>{D.update()}))},setValue:e=>{D.dropdown._findAndSelectChoiceByValue("All"===e[0]?e[0]:e[0]+" Seats")},reset:()=>{D.setValue(["All"])},toggle:()=>{D.section.style.display="block"}},U={name:"years",section:null,dropdown:null,element:null,values:null,valueNames:null,items:[],itemNames:["All"],query:null,init:()=>{U.section=document.getElementById(`${U.name}`),U.dropdown=new Choices(U.section,{removeItemButton:!0,duplicateItemsAllowed:!1,editItems:!0,searchEnabled:!1,searchChoices:!1,shouldSort:!1,allowHTML:!0}),U.element=U.dropdown.passedElement.element.parentElement;const e=f.searchParams.get(U.name);U.query=e?e.split(","):[];for(let e=(new Date).getFullYear();e>=1990;e--)U.itemNames.push(e.toString());U.loadListeners(),U.addItems(U.itemNames),U.setValue(U.query)},hasValue:()=>U.values.length>0,addListener:(e,t)=>{U.section.addEventListener(e,t)},setPlaceHolder:e=>{U.dropdown.input.placeholder=e,U.dropdown.input.setWidth(3)},clearPlaceHolder:()=>{U.setPlaceHolder("")},update:()=>{U.values=U.dropdown.getValue(),U.valueNames=U.values.map((e=>e.value)),U.items=U.dropdown._currentState.choices.filter(((e,t,a)=>!U.valueNames.includes(e.value)&&t===a.findIndex((t=>t.value===e.value)))),U.itemNames=U.items.map((e=>e.value)),U.clearPlaceHolder(),U.hasValue()||U.setPlaceHolder("All")},onSubmit:()=>{U.hasValue()?f.searchParams.set(U.name,U.valueNames):f.searchParams.delete(U.name)},loadListeners:()=>{U.addListener("change",(e=>{U.update()})),U.addListener("highlightItem",(e=>{U.update()}))},addItems:e=>{e.forEach((e=>{const t={value:e,label:e,placeholder:"All"===e};U.items.push(t)})),U.dropdown.setChoices(U.items,"value","label",!0)},setValue:e=>{e.forEach((e=>{U.dropdown._findAndSelectChoiceByValue(e)}))},reset:()=>{U.dropdown.removeActiveItems()},toggle:()=>{U.section.style.display="block"}},O={"filter-packets":{en:"Packets",de:"Pakete",cs:"Balíčky"},"filter-marks":{en:"Brands",de:"Marken",cs:"Značky"},"filter-models":{en:"Models",de:"Modelle",cs:"Modely"},"filter-colors":{en:"Colors",de:"Farben",cs:"Barvy"},"filter-distance":{en:"Max. Distance",de:"Max. Entfernung",cs:"Max. Vzdálenost"},"filter-fuel":{en:"Fuel Type",de:"Kraftstoffart",cs:"Typ paliva"},"filter-transmission":{en:"Transmission",de:"Getriebe",cs:"Převodovka"},"filter-rating":{en:"Min. Rating",de:"Min. Bewertung",cs:"Min. Hodnocení"},"filter-power":{en:"Min. Power",de:"Min. Leistung",cs:"Min. Výkon"},"filter-doors":{en:"Doors",de:"Türe",cs:"Dveře"},"filter-seats":{en:"Seats",de:"Sitze",cs:"Sedadla"},"filter-years":{en:"Build Years",de:"Baujahre",cs:"Výrobní roky"},"filter-more-btn":{en:"More Filters",de:"Weitere Filter",cs:"Více filtrů"},"filter-less-btn":{en:"Less Filters",de:"Weniger Filter",cs:"Méně filtrů"},"filter-reset-btn":{en:"Reset Filters",de:"Filter zurücksetzen",cs:"Obnovit filtry"}};let W;$("#menue .contact");const z={lang:null,dropdown:null,section:null,init:()=>{z.section=document.getElementById("language"),z.dropdown=new Choices(z.section,{removeItemButton:!0,duplicateItemsAllowed:!1,editItems:!0,searchEnabled:!1,searchChoices:!1,allowHTML:!0});const e={english:"en",deutsch:"de",čeština:"cs"};z.lang=$("html").attr("lang"),z.dropdown._findAndSelectChoiceByValue(N(function(e,t){for(const a in e)if(e.hasOwnProperty(a)&&e[a]===t)return a;return null}(e,z.lang))),z.section.addEventListener("change",(t=>{Cookies.set("language",e[t.target.value.toLowerCase()]),$("html").attr("lang",e[t.target.value.toLowerCase()]),z.update()})),z.update()},update:()=>{z.lang=$("html").attr("lang"),W.special(),$("[data-langKey]").each(((e,t)=>{const a=W[$(t).data().langkey][z.lang];if("INPUT"===$(t).get(0).nodeName||"TEXTAREA"===$(t).get(0).nodeName)return $(t).attr("placeholder",a);$(t).html(a)}))}},G={isOpen:!1,init:async()=>{await E.init(),await k.init(),B.init(),_.init(),H.init(),M.init(),q.init(),T.init(),F.init(),D.init(),U.init(),G.update()},submit:()=>{E.onSubmit(),k.onSubmit(),A.onSubmit(),B.onSubmit(),_.onSubmit(),H.onSubmit(),M.onSubmit(),q.onSubmit(),T.onSubmit(),F.onSubmit(),D.onSubmit(),U.onSubmit(),window.location.href!=f.href&&(window.location.href=f.href)},reset:()=>{E.reset(),k.reset(),B.reset(),_.reset(),H.reset(),M.reset(),q.reset(),T.reset(),F.reset(),D.reset(),U.reset(),G.update()},toggle:()=>{$(".filter-section").slice(3).toggle(),G.isOpen=!G.isOpen,$("#more-options-button").text(G.isOpen?O["filter-less-btn"][z.lang]:O["filter-more-btn"][z.lang])},update:()=>{E.update(),k.update(),A.update(),B.update(),_.update(),H.update(),M.update(),q.update(),T.update(),F.update(),D.update(),U.update()}};class j{constructor(e){this.car=e,this.lang=$("html").attr("lang")}render(){let e="";for(const t of("en"==this.lang?this.car.keywords:this.car[this.lang]?.keywords)||[])e+=`<p class="popular-car-keyword" title="${N(t)}">${N(t)}</p>\n                        <div class="popular-car-keyword-line"></div>`;return`\n              <a href="/car?id=${this.car._id}">\n                <article class="popular-car">\n                  <img class="popular-car-image" src="${this.car.image}">\n                  <div class="popular-car-content">\n                    <div>\n                      <p class="popular-car-title">${"en"==this.lang?this.car.title:this.car[this.lang].title}</p>\n                      <div class="rating">\n                        <img src="/images/star.png">\n                        <p class="rate">${this.car.rating} / 5</p>\n                        <p class="rates">(${this.car.ratings})</p>\n                      </div>\n                      <div class="popular-car-keywords">\n                      ${e}\n                      </div>\n                    </div>\n                    <p class="popular-car-description">\n                      ${("en"==this.lang?this.car.description:this.car[this.lang]?.description)?.replace(/<[^>]+>/g,"")}\n                    </p>\n                    <div id="bottom">\n                      <p id="info">\n                      ${this.car.rentedUntil?`<img src="/images/info.png" />\n                        ${t=this.car.rentedUntil,moment(t).locale($("html").attr("lang")).format("LL")}`:""}\n                      </p>\n                      <button class="popular-car-button" data-langKey="car-button">Rent this car</button>\n                    </div>\n                  </div>\n                </article>\n                </a>\n        `;var t}}const R={"search-input-placeholder":{en:"Search...",de:"Suchen...",cs:"Hledat..."},"navigation-home":{en:"Home",de:"Startseite",cs:"Domů"},"navigation-browse":{en:"Browse",de:"Durchsuchen",cs:"Prohlížet"},"navigation-aboutus":{en:"About Us",de:"Über uns",cs:"O nás"},"navigation-favorites":{en:"My Favorites",de:"Meine Favoriten",cs:"Mé oblíbené"},"filter-button":{en:"Update",de:"Aktualisieren",cs:"Aktualizovat"},"car-button":{en:"Rent this car",de:"Dieses Auto mieten",cs:"Vypůjčte si toto auto."},...O,"pagination-previous":{en:"Back",de:"Zurück",cs:"Zpět"},"pagination-go":{en:"Go",de:"Los",cs:"Jděte"},"pagination-next":{en:"Next",de:"Weiter",cs:"Další"},special:()=>{e.html("");for(const t of b){const a=new j(t);e.append(a.render())}}},K=parseInt(new URL(location.href).searchParams.get("page"))||1,Z=$("#pages"),Y=$("#pagination input"),J=$("#pagination #previous"),X=$("#pagination #go"),Q=$("#pagination #next"),ee=$("#filter-button"),te=$("#more-options-button"),ae=$("#reset-button");$(document).ready((async()=>{W=R,await async function(t={}){const a=await $.ajax({url:`/api/cars${location.search}`,type:"GET",data:t});if(b=a.cars,y=a.pages,0===y)return m.text(`WHOO!! We don't have the page ${currentPage}! Sorry!`),void c.showGrid();if(0===a.cars.length)for(const t of a.cars){const a=new Article(t);e.append(a.render())}else c.hide()}({limit:30,revertSorting:!0});const a=f.searchParams.get("page");let l=parseInt(a);const s=f.searchParams.get("search");(isNaN(l)||l<1||l>y)&&(l=K,f.searchParams.set("page",l),window.history.replaceState({},"",f.href)),$("#go").click((e=>{e.preventDefault();const t=parseInt($("#page-input").val());!isNaN(t)&&t>=1&&t<=y&&(f.searchParams.set("page",t),window.location.href=f.href)})),s||(f.searchParams.delete("search"),window.history.replaceState({},"",f.href)),te.click((()=>{G.toggle()})),ae.click((()=>{G.reset()})),ee.click((e=>{e.preventDefault(),f.searchParams.set("page",1);const t=$("#search-input").val();""!=t?f.searchParams.set("search",t):f.searchParams.delete("search"),G.submit()})),t.submit((e=>{e.preventDefault(),f.searchParams.set("page",1);const t=$("#search-input").val();t!==L&&G.reset(),""!=t?f.searchParams.set("search",t):f.searchParams.delete("search"),G.submit()})),$("#filter-button").text("UPDATE"),$("#sub-actions").showFlex(),$("#filter-button").css("margin-top","30px"),f.searchParams.set("page",K-1),$("#previous").attr("href",f.href),f.searchParams.set("page",K+1),$("#next").attr("href",f.href),$("#search-input").val(s),Z.text(`${l} / ${y}`),Y.val(l),Y.attr("max",y),X.show(),Y.show(),L=d.val(),l>1&&J.show(),l<y&&Q.show(),await G.init(),z.init(),u.fadeOut(),$("html").css({overflow:"auto"})}))})();